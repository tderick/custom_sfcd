<?xml version="1.0" encoding="UTF-8"?>

<odoo>
	<data>
		<record id="sale_order_form_inherit" model="ir.ui.view">
			<field name="name">sale.order.form.inherit</field>
			<field name="model">sale.order</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="sale.view_order_form" />
			<field name="arch" type="xml">

				<!-- Hide paiement term -->
				<xpath expr="//field[@name='payment_term_id']" position="replace">
				</xpath>

				<!-- Display Delivery address -->
				<xpath expr="//field[@name='partner_id']" position="after">
					<span class="o_form_label o_td_label" name="address_name">
						<b>Addresse de livraison</b>
					</span>
					<div class="o_address_format">
						<field name="street" placeholder="Rue" class="o_address_street"
							attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
						<field name="zip_id"
							options="{'create_name_field': 'city', 'no_open': True, 'no_create': True}"
							placeholder="City completion" class="oe_edit_only"
							attrs="{'invisible': [('state', 'in', ['sale', 'done'])]}" />
						<field name="city" placeholder="Cité" class="o_address_city"
							attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
						<field name="state_id" class="o_address_state" placeholder="État"
							options="{'no_open': True, 'no_quick_create': True}"
							context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"
							attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
						<field name="zip" placeholder="ZIP" class="o_address_zip"
							attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
						<field name="country_id" placeholder="Pays" class="o_address_country"
							options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
							attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
					</div>

					<field name="contact_name" placeholder="Nom du contact"
						attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
					<field name="phone" placeholder="Téléphone" widget="phone"
						attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}" />
				</xpath>

				<xpath expr="//field[@name='partner_id']" position="replace">
					<field name="partner_id" widget="res_partner_many2one"
						context="{'res_partner_search_mode': 'customer', 'show_address': 0, 'show_vat': False}"
						options="{&quot;always_reload&quot;: True}"
						attrs="{'readonly':True}"
					/>
				</xpath>

				<xpath expr="//field[@name='validity_date']" position="replace">
					<field name="delivery_date"
						attrs="{'readonly': [('state', 'in', ['sale', 'done'])]}"></field>
				</xpath>


				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_unit']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_uom_qty']"
					position="before">
					<field name="quantity_in_stock" />
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='tax_id']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_subtotal']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_invoiced']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_delivered']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='customer_lead']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/field[@name='order_line']"
					position="attributes">
					<attribute name="attrs">{'readonly': [('state', 'in',
						('sent','sale','done','cancel'))]}</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page/group[@name='note_group']"
					position="replace"> </xpath>

				<xpath
					expr="/form/sheet/notebook/page[@name='other_information']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath
					expr="/form/sheet/notebook/page[@name='customer_signature']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				
			</field>
		</record>
	</data>
</odoo>